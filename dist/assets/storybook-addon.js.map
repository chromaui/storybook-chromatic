{"version":3,"sources":["../../src/assets/storybook-addon.js"],"names":["location","pathname","match","console","error","window","__STORYBOOK_CLIENT_API__","__STORYBOOK_ADDONS_CHANNEL__","require","default","getChannel","runtime","renderSpec","specRuntime","input","Error","kind","name","emit","story","document","getElementById","specs","getStorybook","map","stories","component","displayName","split","slice","reduce","a","b"],"mappings":";;;;;;;;;;AAGA;;;;;;AAEA,IAAI,CAACA,SAASC,QAAT,CAAkBC,KAAlB,CAAwB,cAAxB,CAAL,EAA8C;AAC5CC,UAAQC,KAAR;AACD,C,CAPD;AACA;;cAQiEC,M;IAA3DC,wB,WAAAA,wB;IAA0BC,4B,WAAAA,4B;;AAEhC;;AACA,IAAI,CAACD,wBAAD,IAA6B,CAACC,4BAAlC,EAAgE;AAC9DD,6BAA2BE,QAAQ,kBAAR,CAA3B;AACAD,iCAA+BC,QAAQ,mBAAR,EAA6BC,OAA7B,CAAqCC,UAArC,EAA/B;AACD;;AAED,IAAMC,UAAU,WAAhB;AACA,sBAAU;AACRA,kBADQ;AAERC,YAFQ,4BAEoC;AAAA,QAAtBC,WAAsB,QAA/BF,OAA+B;AAAA,QAATG,KAAS,QAATA,KAAS;;AAC1C,QAAID,gBAAgBF,OAApB,EAA6B;AAC3B,YAAM,IAAII,KAAJ,qCAA4CF,WAA5C,YAAN;AACD;;AAHyC,QAKlCG,IALkC,GAKnBF,KALmB,CAKlCE,IALkC;AAAA,QAK5BC,IAL4B,GAKnBH,KALmB,CAK5BG,IAL4B;;AAM1CV,iCAA6BW,IAA7B,CAAkC,iBAAlC,EAAqD,EAAEF,UAAF,EAAQG,OAAOF,IAAf,EAArD;;AAEA,WAAOG,SAASC,cAAT,CAAwB,MAAxB,CAAP;AACD,GAXO;AAYRC,OAZQ,mBAYA;AACN,WAAOhB,yBACJiB,YADI,GAEJC,GAFI,CAEA;AAAA,UAAGR,IAAH,SAAGA,IAAH;AAAA,UAASS,OAAT,SAASA,OAAT;AAAA,aACHA,QAAQD,GAAR,CAAY;AAAA,YAAGP,IAAH,SAAGA,IAAH;AAAA,eAAe;AACzBA,oBADyB;AAEzBS,qBAAW;AACTT,kBAAMD,IADG;AAETW,yBAAaX,KAAKY,KAAL,CAAW,GAAX,EAAgBC,KAAhB,CAAsB,CAAC,CAAvB,EAA0B,CAA1B;AAFJ,WAFc;AAMzBlB,0BANyB;AAOzBG,iBAAO,yBAAe;AACpBE,sBADoB;AAEpBC;AAFoB,WAAf;AAPkB,SAAf;AAAA,OAAZ,CADG;AAAA,KAFA,EAgBJa,MAhBI,CAgBG,UAACC,CAAD,EAAIC,CAAJ;AAAA,wDAAcD,CAAd,oCAAoBC,CAApB;AAAA,KAhBH,EAgB2B,EAhB3B,CAAP,CADM,CAiBiC;AACxC;AA9BO,CAAV","file":"storybook-addon.js","sourcesContent":["/* eslint-env browser */\n/* eslint-disable import/no-extraneous-dependencies, global-require */\n\nimport configure from '../client';\n\nif (!location.pathname.match('/iframe.html')) {\n  console.error(`storybook-chromatic should be installed in your \\`.storybook/config.js\\``);\n}\n\nlet { __STORYBOOK_CLIENT_API__, __STORYBOOK_ADDONS_CHANNEL__ } = window;\n\n// Simulate Storybook 3.4's API for @storybook/react < 3.4\nif (!__STORYBOOK_CLIENT_API__ || !__STORYBOOK_ADDONS_CHANNEL__) {\n  __STORYBOOK_CLIENT_API__ = require('@storybook/react');\n  __STORYBOOK_ADDONS_CHANNEL__ = require('@storybook/addons').default.getChannel();\n}\n\nconst runtime = 'storybook';\nconfigure({\n  runtime,\n  renderSpec({ runtime: specRuntime, input }) {\n    if (specRuntime !== runtime) {\n      throw new Error(`Storybook plugin cannot handle ${specRuntime} specs`);\n    }\n\n    const { kind, name } = input;\n    __STORYBOOK_ADDONS_CHANNEL__.emit('setCurrentStory', { kind, story: name });\n\n    return document.getElementById('root');\n  },\n  specs() {\n    return __STORYBOOK_CLIENT_API__\n      .getStorybook()\n      .map(({ kind, stories }) =>\n        stories.map(({ name }) => ({\n          name,\n          component: {\n            name: kind,\n            displayName: kind.split('/').slice(-1)[0],\n          },\n          runtime,\n          input: JSON.stringify({\n            kind,\n            name,\n          }),\n        }))\n      )\n      .reduce((a, b) => [...a, ...b], []); // flatten\n  },\n});\n"]}