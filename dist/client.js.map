{"version":3,"sources":["webpack:///webpack/bootstrap cf51489c683cf707f9f2","webpack:///./src/client/isolator.js","webpack:///./src/client/index.js","webpack:///external \"babel-runtime/helpers/extends\"","webpack:///external \"babel-runtime/helpers/objectWithoutProperties\"","webpack:///external \"babel-runtime/helpers/toConsumableArray\""],"names":["configure","runtimes","runtimeRenderers","forEach","r","runtime","renderSpec","runtimeSpecs","map","specs","spec","reduce","a","b","renderSpecToDom","parsedSpec","input","JSON","parse","renderer","Error","window","__chromaticRuntimeSpecs__","__renderChromaticSpec__","handleMessage","data","source","origin","message","rest","postMessage","service","version","error","toString","addEventListener","hasSetup","isIsolator","document","location","hash","match","concat","clearScreen"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;kBC/DwBA,S;;;;AADxB;AACe,SAASA,SAAT,OAAiC;AAAA,MAAZC,QAAY,QAAZA,QAAY;;AAC9C,MAAMC,mBAAmB,EAAzB;AACAD,WAASE,OAAT,CAAiB,aAAK;AACpBD,qBAAiBE,EAAEC,OAAnB,IAA8BD,EAAEE,UAAhC;AACD,GAFD;;AAIA,WAASC,YAAT,GAAwB;AACtB,WAAON,SACJO,GADI,CACA;AAAA,UAAGH,OAAH,SAAGA,OAAH;AAAA,UAAYI,KAAZ,SAAYA,KAAZ;AAAA,aAAwBA,QAAQD,GAAR,CAAY;AAAA,wCAAWH,gBAAX,IAAuBK,IAAvB;AAAA,OAAZ,CAAxB;AAAA,KADA,EAEJC,MAFI,CAEG,UAACC,CAAD,EAAIC,CAAJ;AAAA,wDAAcD,CAAd,oCAAoBC,CAApB;AAAA,KAFH,EAE2B,EAF3B,CAAP;AAGD;;AAED,WAASC,eAAT,CAAyBJ,IAAzB,EAA+B;AAC7B,QAAMK,wCACDL,IADC;AAEJM,aAAO,OAAON,KAAKM,KAAZ,KAAsB,QAAtB,GAAiCC,KAAKC,KAAL,CAAWR,KAAKM,KAAhB,CAAjC,GAA0DN,KAAKM;AAFlE,MAAN;;AAKA,QAAIN,KAAKL,OAAT,EAAkB;AAChB,UAAMc,WAAWjB,iBAAiBQ,KAAKL,OAAtB,CAAjB;AACA,UAAI,CAACc,QAAL,EAAe;AACb,cAAM,IAAIC,KAAJ,4CAEFV,KAAKL,OAFH,mEAAN;AAKD;AACD,aAAOc,SAASJ,UAAT,CAAP;AACD;AACD,UAAM,IAAIK,KAAJ,CAAU,4BAAV,EAAwCV,IAAxC,CAAN;AACD;;AAED;AACAW,SAAOC,yBAAP,GAAmCf,YAAnC;;AAEA;AACAc,SAAOE,uBAAP,GAAiCT,eAAjC;;AAEA,WAASU,aAAT,QAAiD;AAAA,QAAxBC,IAAwB,SAAxBA,IAAwB;AAAA,QAAlBC,MAAkB,SAAlBA,MAAkB;AAAA,QAAVC,MAAU,SAAVA,MAAU;;AAC/C;;AAD+C,QAGvCC,OAHuC,GAGlBH,IAHkB,CAGvCG,OAHuC;AAAA,QAG3BC,IAH2B,0CAGlBJ,IAHkB;;AAI/C,QAAIG,YAAY,qBAAhB,EAAuC;AACrCF,aAAOI,WAAP,CACE;AACEF,iBAAS,cADX;AAEEG,iBAAS,oBAFX;AAGEC,iBAAS;AAHX,OADF,EAMEL,MANF;AAQD,KATD,MASO,IAAIC,YAAY,YAAhB,EAA8B;AACnC,UAAI;AACFd,wBAAgBe,KAAKnB,IAArB;AACAgB,eAAOI,WAAP,CACE;AACEF,mBAAS;AADX,SADF,EAIED,MAJF;AAMD,OARD,CAQE,OAAOM,KAAP,EAAc;AACdP,eAAOI,WAAP,CACE;AACEF,mBAAS,iBADX;AAEEK,iBAAOA,MAAMC,QAAN;AAFT,SADF,EAKEP,MALF;;AAQA;AACA,cAAMM,KAAN;AACD;AACF;AACF;;AAEDZ,SAAOc,gBAAP,CAAwB,SAAxB,EAAmCX,aAAnC,EAAkD,KAAlD;AACD,C;;;;;;;;;;;;;AC5ED;;;;;;AAEA,IAAIY,WAAW,KAAf,C,CAHA;;AAIA,SAASpC,SAAT,GAAkC;AAAA,MAAfC,QAAe,uEAAJ,EAAI;;AAChC,MAAImC,QAAJ,EAAc;AACZ,UAAM,IAAIhB,KAAJ,CAAU,+BAAV,CAAN;AACD;AACDgB,aAAW,IAAX;;AAEA,MAAInC,aAAa,EAAjB,EAAqB;AACnB,UAAM,IAAImB,KAAJ,CACJ,iGADI,CAAN;AAGD;;AAED;AACA;AACA,MAAMiB,aAAaC,SAASC,QAAT,CAAkBC,IAAlB,CAAuBC,KAAvB,CAA6B,wBAA7B,CAAnB;;AAEA,0BAAc;AACZxC,cAAU,GAAGyC,MAAH,CAAUzC,QAAV,CADE,EACmB;AAC/B0C,iBAAaN;AAFD,GAAd;AAID;;kBAEcrC,S;;;;;;AC1Bf,0D;;;;;;ACAA,0E;;;;;;ACAA,oE","file":"dist/client.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cf51489c683cf707f9f2","/* eslint-env browser */\nexport default function configure({ runtimes }) {\n  const runtimeRenderers = {};\n  runtimes.forEach(r => {\n    runtimeRenderers[r.runtime] = r.renderSpec;\n  });\n\n  function runtimeSpecs() {\n    return runtimes\n      .map(({ runtime, specs }) => specs().map(spec => ({ runtime, ...spec })))\n      .reduce((a, b) => [...a, ...b], []);\n  }\n\n  function renderSpecToDom(spec) {\n    const parsedSpec = {\n      ...spec,\n      input: typeof spec.input === 'string' ? JSON.parse(spec.input) : spec.input,\n    };\n\n    if (spec.runtime) {\n      const renderer = runtimeRenderers[spec.runtime];\n      if (!renderer) {\n        throw new Error(\n          `Didn't find a renderer for runtime '${\n            spec.runtime\n          }' -- are you sure you added it in your client configuration?`\n        );\n      }\n      return renderer(parsedSpec);\n    }\n    throw new Error('No runtime passed for spec', spec);\n  }\n\n  // API to be used by test script to gather runtime spec definitions\n  window.__chromaticRuntimeSpecs__ = runtimeSpecs;\n\n  // API to be used by capture worker to render a spec\n  window.__renderChromaticSpec__ = renderSpecToDom;\n\n  function handleMessage({ data, source, origin }) {\n    // TODO -- is it unsafe to not check origin? I don't get the sense it matters\n\n    const { message, ...rest } = data;\n    if (message === 'requestCapabilities') {\n      source.postMessage(\n        {\n          message: 'capabilities',\n          service: 'chromatic-isolator',\n          version: 0,\n        },\n        origin\n      );\n    } else if (message === 'renderSpec') {\n      try {\n        renderSpecToDom(rest.spec);\n        source.postMessage(\n          {\n            message: 'renderedSpec',\n          },\n          origin\n        );\n      } catch (error) {\n        source.postMessage(\n          {\n            message: 'renderSpecError',\n            error: error.toString(),\n          },\n          origin\n        );\n\n        // For now, throw the error so we can see it in the iframe\n        throw error;\n      }\n    }\n  }\n\n  window.addEventListener('message', handleMessage, false);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/isolator.js","/* eslint-env browser */\nimport startIsolator from './isolator';\n\nlet hasSetup = false;\nfunction configure(runtimes = []) {\n  if (hasSetup) {\n    throw new Error('Chromatic already configured.');\n  }\n  hasSetup = true;\n\n  if (runtimes === []) {\n    throw new Error(\n      'Chromatic must be configured with at least one runtime. http://docs.chromaticqa.com/runtime-api'\n    );\n  }\n\n  // If we are rendered in an iframe, (by ourself), then we need to clear\n  // the screen right away, rather than waiting for a spec\n  const isIsolator = document.location.hash.match('__chromatic_isolator__');\n\n  startIsolator({\n    runtimes: [].concat(runtimes), // allow passing a single runtime\n    clearScreen: isIsolator,\n  });\n}\n\nexport default configure;\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/index.js","module.exports = require(\"babel-runtime/helpers/extends\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/extends\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/objectWithoutProperties\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/objectWithoutProperties\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/toConsumableArray\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/toConsumableArray\"\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}